---
abbrlink: '0'
---
## 数据库优化  
a) 选择合适的字段，比如邮箱字段可以设为char（6），尽量把字段设置为not null，这样查询的时候数据库就不需要比较null值  
b) 使用关联查询（ left join on）查询代替子查询  
c) 使用union联合查询手动创建临时表  
d) 开启事务，当数据库执行多条语句出现错误时，事务会回滚，可以维护数据库的完整性  
e) 使用外键，事务可以维护数据的完整性但是它却不能保证数据的关联性，使用外键可以保证数据的关联性  
f) 使用索引，索引是提高数据库性能的常用方法，它可以令数据库服务器以比没有索引快的多的速度检索特定的行，特别是对于max，min，order by查询时，效果更明显  
g) 优化的查询语句，绝大多数情况下，使用索引可以提高查询的速度，但如果sql语句使用不恰当的话，索引无法发挥它的特性。  

## SQL存储过程详细解析 
- 存储过程(stored procedure)是一组为了完成特定功能的SQL语句集合，经编译后存储在服务器端的，利用存储过程可以加速SQL语句的执行。
- 存储过程分为系统存储过程和自定义存储过程。
- 系统存储过程在master数据库中，但是在其他的数据库中可以直接调用，并且在调用时不必在存储过程前加上数据库名，因为在创建一个新数据库时，系统存储过程在新的数据库中会自动创建
- 自定义存储过程，由用户创建并能完成某一特定功能的存储过程，存储过程既可以有参数又有返回值，但是它与函数不同，存储过程的返回值只是指明执行是否成功，并不能像函数那样被直接调用，只能利用execute来执行存储过程。


## 存储过程的优点 
- 提高应用程序的通用性和可移植性：存储过程创建后，可以在程序中被多次调用，而不必重新编写该存储过程的SQL语句。并且数据库专业人员可以随时对存储过程进行修改，且对程序源代码没有影响，这样就极大的提高了程序的可移植性。
- 可以更有效的管理用户操作数据库的权限：在Sql Server数据库中，系统管理员可以通过对执行某一存储过程的权限进行限制，从而实现对相应的数据访问进行控制，避免非授权用户对数据库的访问，保证数据的安全。
- 可以提高SQL的速度，存储过程是编译过的，如果某一个操作包含大量的SQL代码或分别被执行多次，那么使用存储过程比直接使用单条SQL语句执行速度快的多。
- 减轻服务器的负担：当用户的操作是针对数据库对象的操作时，如果使用单条调用的方式，那么网络上还必须传输大量的SQL语句，如果使用存储过程，则直接发送过程的调用命令即可，降低了网络的负担。

## 存储过程的缺点：
- 如果更改范围大到需要对输入存储过程的参数进行更改，或者要更改由其返回的数据，则您仍需要更新程序集中的代码以添加参数、更新 GetValue() 调用，等等，这时候估计比较繁琐了。
- 可移植性差
由于存储过程将应用程序绑定到 SQL Server，因此使用存储过程封装业务逻辑将限制应用程序的可移植性。如果应用程序的可移植性在您的环境中非常重要，则将业务逻辑封装在不特定于 RDBMS 的中间层中可能是一个更佳的选择。 
- 大量采用存储过程进行业务逻辑的开发致命的缺点是很多存储过程不支持面向对象的设计，无法采用面向对象的方式将业务逻辑进行封装，从而无法形成通用的可支持复用的业务逻辑框架。
- 代码可读性差,相当难维护.